# ã‚ªãƒ—ã‚·ãƒ§ãƒ³å·®ç•°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ

v026_multiclass_multilayer ã¨ v026_B_simplified ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³å·®ç•°

ç”Ÿæˆæ—¥æ™‚: 2025-12-13

---

## âœ… å®Œäº†äº‹é …

### 1. ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºã®çµ±ä¸€ï¼ˆå®Œäº†ï¼‰

ä¸¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºã‚’ã€Œæ©Ÿèƒ½ã”ã¨ã®ãƒ–ãƒ­ãƒƒã‚¯è¡¨ç¤ºã€å½¢å¼ã«çµ±ä¸€ã—ã¾ã—ãŸã€‚

**è¡¨ç¤ºãƒ–ãƒ­ãƒƒã‚¯æ§‹æˆ:**
- å®Ÿè¡Œé–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆB_simplifiedã®ã¿ï¼‰
- EDæ³•é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- ã‚³ãƒ©ãƒ é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- å¯è¦–åŒ–é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

---

## ğŸ“Š ã‚ªãƒ—ã‚·ãƒ§ãƒ³å·®ç•°è©³ç´°

### ã€ã‚«ãƒ†ã‚´ãƒªAã€‘v026ã«ã®ã¿å­˜åœ¨ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ç”¨é€” | å„ªå…ˆåº¦ |
|-----------|------|------|--------|
| `--column_radius` | ã‚³ãƒ©ãƒ å½±éŸ¿åŠå¾„ï¼ˆæ‰‹å‹•æŒ‡å®šï¼‰ | Noneãªã‚‰è‡ªå‹•è¨ˆç®— | ä¸­ |
| `--diagnose_column` | ã‚³ãƒ©ãƒ æ§‹é€ ã®è©³ç´°è¨ºæ–­ | ãƒ‡ãƒãƒƒã‚°ç”¨ | ä½ |
| `--fashion` | Fashion-MNISTãƒ•ãƒ©ã‚° | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ‡æ›¿ï¼ˆæ—§æ–¹å¼ï¼‰ | ä½* |
| `--gradient_clip` | å‹¾é…ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°å€¤ | å­¦ç¿’å®‰å®šåŒ– | ä¸­ |
| `--heatmap` | æ´»æ€§åŒ–ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— | å¯è¦–åŒ–æ‹¡å¼µ | ä½ |
| `--list_hyperparams` | HyperParamsä¸€è¦§è¡¨ç¤º | è¨­å®šç¢ºèª | ä¸­ |
| `--overlap` | ã‚³ãƒ©ãƒ é–“é‡è¤‡åº¦ | å††ç’°æ§‹é€ ã®ã¿æœ‰åŠ¹ | ä½ |

*`--dataset`ã§çµ±åˆå¯èƒ½

### ã€ã‚«ãƒ†ã‚´ãƒªBã€‘B_simplifiedã«ã®ã¿å­˜åœ¨ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ç”¨é€” | å„ªå…ˆåº¦ |
|-----------|------|------|--------|
| `--dataset` | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠ | mnist/fashion/cifar10/cifar100 | é«˜ |
| `--layers` | éš ã‚Œå±¤ã®æ•°ã‚’æ˜ç¤ºæŒ‡å®š | 1-5å±¤ã®æŒ‡å®š | é«˜ |
| `--activation` | æ´»æ€§åŒ–é–¢æ•°é¸æŠ | tanh/sigmoid/leaky_relu | é«˜ |
| `--viz_interval` | å¯è¦–åŒ–æ›´æ–°é–“éš” | ã‚¨ãƒãƒƒã‚¯å˜ä½ | ä¸­ |

### ã€ã‚«ãƒ†ã‚´ãƒªCã€‘åå‰ãŒç•°ãªã‚‹ãŒåŒã˜æ©Ÿèƒ½

| v026 | B_simplified | æ©Ÿèƒ½ | æ¨å¥¨ |
|------|-------------|------|------|
| `--train` | `--train_samples` | è¨“ç·´ã‚µãƒ³ãƒ—ãƒ«æ•° | `--train_samples` |
| `--test` | `--test_samples` | ãƒ†ã‚¹ãƒˆã‚µãƒ³ãƒ—ãƒ«æ•° | `--test_samples` |
| `--lr` | `--learning_rate` | å­¦ç¿’ç‡ | `--learning_rate` |
| `--viz` | `--visualize` | å¯è¦–åŒ–æœ‰åŠ¹åŒ– | `--visualize` |

**æ¨å¥¨ç†ç”±:** B_simplifiedã®å‘½åã®æ–¹ãŒæ˜ç¤ºçš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„

### ã€ã‚«ãƒ†ã‚´ãƒªDã€‘é€†ã®æ„å‘³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| v026 | B_simplified | èª¬æ˜ |
|------|-------------|------|
| `--use_circular` | `--use_hexagonal` / `--no_hexagonal` | v026: å††ç’°ã«åˆ‡æ›¿<br>B_simplified: ãƒãƒ‹ã‚«ãƒ /å††ç’°ã‚’æ˜ç¤º |

**æ¨å¥¨:** B_simplifiedã®æ–¹å¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’æ˜ç¤ºï¼‰

---

## ğŸ” æ©Ÿèƒ½çš„å·®ç•°ã®è©³ç´°

### 1. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠæ–¹å¼

**v026_multiclass_multilayer:**
```bash
# MNISTã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
python3 columnar_ed_ann_v026_multiclass_multilayer.py

# Fashion-MNIST
python3 columnar_ed_ann_v026_multiclass_multilayer.py --fashion
```

**v026_B_simplified:**
```bash
# 4ç¨®é¡ã‹ã‚‰é¸æŠå¯èƒ½
python3 columnar_ed_ann_v026_multiclass_multilayer_modular_B_simplified.py --dataset mnist
python3 columnar_ed_ann_v026_multiclass_multilayer_modular_B_simplified.py --dataset fashion
python3 columnar_ed_ann_v026_multiclass_multilayer_modular_B_simplified.py --dataset cifar10
python3 columnar_ed_ann_v026_multiclass_multilayer_modular_B_simplified.py --dataset cifar10
0
```

**å„ªä½æ€§:** B_simplifiedã®æ–¹ãŒæ‹¡å¼µæ€§ãŒé«˜ã„

### 2. å±¤æ•°æŒ‡å®šæ–¹å¼

**v026_multiclass_multilayer:**
```bash
# éš ã‚Œå±¤ã‚µã‚¤ã‚ºã®ã¿æŒ‡å®šï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
--hidden 512           # 1å±¤
--hidden 256,128       # 2å±¤
--hidden 256,128,64    # 3å±¤
```
å±¤æ•°ã¯éš ã‚Œå±¤ã‚µã‚¤ã‚ºã®å€‹æ•°ã‹ã‚‰æ¨å®š

**v026_B_simplified:**
```bash
# å±¤æ•°ã‚’æ˜ç¤º + ã‚µã‚¤ã‚ºã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Š
--layers 1 --hidden 512
--layers 2 --hidden 256 128
--layers 3 --hidden 256 128 64
```
å±¤æ•°ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š

**å„ªä½æ€§:** v026ã®æ–¹ãŒç°¡æ½”ã€B_simplifiedã®æ–¹ãŒæ˜ç¤ºçš„

### 3. æ´»æ€§åŒ–é–¢æ•°ã®é¸æŠ

**v026_multiclass_multilayer:**
- å›ºå®š: tanhï¼ˆã‚³ãƒ¼ãƒ‰å†…ã§ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ï¼‰

**v026_B_simplified:**
```bash
--activation tanh          # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
--activation sigmoid
--activation leaky_relu
```

**å„ªä½æ€§:** B_simplifiedã®ã¿ãŒå‹•çš„é¸æŠå¯èƒ½

### 4. å¯è¦–åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³

**v026_multiclass_multilayer:**
```bash
--viz                      # å­¦ç¿’æ›²ç·šã®ã¿
--viz --heatmap           # å­¦ç¿’æ›²ç·š + ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—
--save_viz results/exp1   # ãƒ‘ã‚¹æŒ‡å®šå¯èƒ½
```

**v026_B_simplified:**
```bash
--visualize               # å¯è¦–åŒ–æœ‰åŠ¹åŒ–
--viz_interval 10         # æ›´æ–°é–“éš”ï¼ˆã‚¨ãƒãƒƒã‚¯ï¼‰
--save_viz                # ä¿å­˜ï¼ˆãƒ‘ã‚¹å›ºå®šï¼‰
```

**å„ªä½æ€§:** v026ã®æ–¹ãŒæŸ”è»Ÿï¼ˆãƒ‘ã‚¹æŒ‡å®šå¯ã€ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚ã‚Šï¼‰

---

## ğŸ’¡ çµ±åˆã®æ¨å¥¨æ–¹é‡

### é«˜å„ªå…ˆåº¦ï¼ˆå¿…é ˆï¼‰

1. **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠã‚’çµ±ä¸€**
   - `--fashion` â†’ `--dataset {mnist,fashion,cifar10,cifar100}`
   - v026ã«`--dataset`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 

2. **ã‚µãƒ³ãƒ—ãƒ«æ•°æŒ‡å®šã‚’çµ±ä¸€**
   - `--train` / `--test` â†’ `--train_samples` / `--test_samples`
   - ã‚ˆã‚Šæ˜ç¤ºçš„ãªå‘½å

3. **å­¦ç¿’ç‡ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ±ä¸€**
   - `--lr` â†’ `--learning_rate`
   - ç•¥ç§°ã¯é¿ã‘ã€æ˜ç¤ºçš„ã«

4. **æ´»æ€§åŒ–é–¢æ•°ã‚’å‹•çš„é¸æŠå¯èƒ½ã«**
   - v026ã«`--activation`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
   - B_simplifiedã¨åŒã˜é¸æŠè‚¢

5. **å±¤æ•°æŒ‡å®šã®æ˜ç¤ºåŒ–**
   - v026ã«`--layers`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
   - `--hidden`ã‹ã‚‰ã®è‡ªå‹•æ¨å®šã‚‚ç¶­æŒ

### ä¸­å„ªå…ˆåº¦ï¼ˆæ¨å¥¨ï¼‰

6. **å¯è¦–åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ±ä¸€**
   - `--viz` â†’ `--visualize`
   - B_simplifiedã«`--heatmap`ã‚’è¿½åŠ 
   - B_simplifiedã®`--save_viz`ã«ãƒ‘ã‚¹æŒ‡å®šæ©Ÿèƒ½ã‚’è¿½åŠ 

7. **æœ‰ç”¨ãªæ©Ÿèƒ½ã®ç›¸äº’ç§»æ¤**
   - v026ã«`--viz_interval`ã‚’è¿½åŠ 
   - B_simplifiedã«`--list_hyperparams`ã‚’è¿½åŠ 
   - B_simplifiedã«`--diagnose_column`ã‚’è¿½åŠ 

8. **gradient clipping**
   - B_simplifiedã«`--gradient_clip`ã‚’è¿½åŠ ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ä½¿ç”¨ã—ãªã„ï¼‰

### ä½å„ªå…ˆåº¦ï¼ˆæ¤œè¨ï¼‰

9. **ã‚³ãƒ©ãƒ æ§‹é€ æŒ‡å®šã®çµ±ä¸€**
   - `--use_circular` vs `--use_hexagonal/--no_hexagonal`
   - ã©ã¡ã‚‰ã‹ã«çµ±ä¸€

10. **ã‚³ãƒ©ãƒ è©³ç´°è¨­å®š**
    - `--column_radius`ã¨`--overlap`ã®æ‰±ã„
    - ä¸Šç´šè€…å‘ã‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦æ®‹ã™ã‹æ¤œè¨

---

## ğŸ“ çµ±åˆå¾Œã®ç†æƒ³çš„ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³æ§‹æˆï¼ˆæ¡ˆï¼‰

```
å®Ÿè¡Œé–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  --dataset              ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠï¼ˆmnist/fashion/cifar10/cifar100ï¼‰
  --train_samples        è¨“ç·´ã‚µãƒ³ãƒ—ãƒ«æ•°
  --test_samples         ãƒ†ã‚¹ãƒˆã‚µãƒ³ãƒ—ãƒ«æ•°
  --epochs               ã‚¨ãƒãƒƒã‚¯æ•°
  --seed                 ä¹±æ•°ã‚·ãƒ¼ãƒ‰
  --list_hyperparams     HyperParamsè¨­å®šä¸€è¦§ã‚’è¡¨ç¤º

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  --layers               éš ã‚Œå±¤ã®æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€--hiddenã‹ã‚‰è‡ªå‹•æ¨å®šã‚‚å¯ï¼‰
  --hidden               å„éš ã‚Œå±¤ã®ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ³æ•°
  --activation           æ´»æ€§åŒ–é–¢æ•°ï¼ˆtanh/sigmoid/leaky_reluï¼‰

EDæ³•é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  --learning_rate        å­¦ç¿’ç‡
  --u1                   ã‚¢ãƒŸãƒ³æ‹¡æ•£ä¿‚æ•°u1
  --u2                   ã‚¢ãƒŸãƒ³æ‹¡æ•£ä¿‚æ•°u2
  --lateral_lr           å´æ–¹æŠ‘åˆ¶ã®å­¦ç¿’ç‡
  --gradient_clip        å‹¾é…ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°å€¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ã‚³ãƒ©ãƒ é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  --base_column_radius   åŸºæº–ã‚³ãƒ©ãƒ åŠå¾„
  --column_radius        ã‚³ãƒ©ãƒ å½±éŸ¿åŠå¾„ï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰
  --participation_rate   ã‚³ãƒ©ãƒ å‚åŠ ç‡
  --column_neurons       å„ã‚¯ãƒ©ã‚¹ã®æ˜ç¤ºçš„ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ³æ•°
  --use_hexagonal        ãƒãƒ‹ã‚«ãƒ æ§‹é€ ã‚’ä½¿ç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
  --use_circular         å††ç’°æ§‹é€ ã‚’ä½¿ç”¨
  --overlap              ã‚³ãƒ©ãƒ é–“é‡è¤‡åº¦ï¼ˆå††ç’°æ§‹é€ ã®ã¿ã€ä¸Šç´šè€…å‘ã‘ï¼‰
  --diagnose_column      ã‚³ãƒ©ãƒ æ§‹é€ ã®è©³ç´°è¨ºæ–­

å¯è¦–åŒ–é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  --visualize            å­¦ç¿’é€²æ—ã®å¯è¦–åŒ–ã‚’æœ‰åŠ¹åŒ–
  --viz_interval         å¯è¦–åŒ–ã®æ›´æ–°é–“éš”ï¼ˆã‚¨ãƒãƒƒã‚¯ï¼‰
  --heatmap              æ´»æ€§åŒ–ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã®è¡¨ç¤º
  --save_viz             å¯è¦–åŒ–çµæœã‚’ä¿å­˜ï¼ˆãƒ‘ã‚¹æŒ‡å®šå¯èƒ½ï¼‰
```

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆ¤æ–­ã‚’ä»°ãé …ç›®ï¼š

1. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³åã®çµ±ä¸€æ–¹é‡**
   - B_simplifiedã®å‘½åï¼ˆ`--train_samples`, `--learning_rate`ç­‰ï¼‰ã‚’æ¡ç”¨ã™ã‚‹ã‹ï¼Ÿ
   - v026ã®çŸ­ç¸®å½¢ï¼ˆ`--train`, `--lr`ç­‰ï¼‰ã‚’æ®‹ã™ã‹ï¼Ÿ

2. **æ©Ÿèƒ½ã®çµ±åˆç¯„å›²**
   - ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä¸¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã‹ï¼Ÿ
   - ã‚¹ã‚¯ãƒªãƒ—ãƒˆã”ã¨ã®ç‰¹æ€§ã‚’æ®‹ã™ã‹ï¼Ÿ

3. **æ®µéšçš„çµ±åˆ vs ä¸€æ‹¬çµ±åˆ**
   - é«˜å„ªå…ˆåº¦é …ç›®ã‹ã‚‰æ®µéšçš„ã«çµ±åˆã™ã‚‹ã‹ï¼Ÿ
   - ä¸€æ‹¬ã§çµ±åˆã™ã‚‹ã‹ï¼Ÿ

4. **å¾Œæ–¹äº’æ›æ€§ã®ç¶­æŒ**
   - æ—§ã‚ªãƒ—ã‚·ãƒ§ãƒ³åï¼ˆ`--lr`, `--train`ç­‰ï¼‰ã‚’ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦æ®‹ã™ã‹ï¼Ÿ
   - å®Œå…¨ã«æ–°ã—ã„å‘½åã«ç§»è¡Œã™ã‚‹ã‹ï¼Ÿ
