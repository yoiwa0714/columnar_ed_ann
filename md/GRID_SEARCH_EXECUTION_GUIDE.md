# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¢ç´¢ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒå®Ÿè¡Œã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### 1. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ†æãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **PARAMETER_ANALYSIS.md**
  - v026_B_simplifiedã®å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆ
  - å­¦ç¿’ç²¾åº¦ã¸ã®å½±éŸ¿åº¦é †ã«ã‚½ãƒ¼ãƒˆï¼ˆ1-10ä½ï¼‰
  - å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¢ç´¢ç¯„å›²ï¼ˆæœ€å¤§4æ®µéšï¼‰
  - æ˜¨å¤œã®å®Ÿé¨“çµæœã‹ã‚‰ã®çŸ¥è¦‹

### 2. ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### Phase 1: ä¸Šä½5ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¢ç´¢
- **ãƒ•ã‚¡ã‚¤ãƒ«å**: `grid_search_phase1_top5.py`
- **æ¢ç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**ï¼ˆ3æ®µéš: æœ€å°å€¤ã€ä¸­å¤®å€¤ã€æœ€å¤§å€¤ï¼‰:
  1. learning_rate: [0.1, 0.4, 0.7]
  2. column_radius: [1.0, 2.0, 3.0]
  3. lateral_lr: [0.03, 0.065, 0.1]
  4. u1: [0.3, 0.4, 0.5]
  5. u2: [0.3, 0.4, 0.5]
- **æ¢ç´¢ç©ºé–“**: 3^5 = 243é€šã‚Š
- **æ¨å®šå®Ÿè¡Œæ™‚é–“**: ç´„1.5æ™‚é–“
- **å›ºå®šæ¡ä»¶**: train=3000, test=1000, epochs=30, seed=42

#### Phase 2: 6-10ä½ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¢ç´¢
- **ãƒ•ã‚¡ã‚¤ãƒ«å**: `grid_search_phase2_rank6_10.py`
- **æ¢ç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**ï¼ˆ3æ®µéš: æœ€å°å€¤ã€ä¸­å¤®å€¤ã€æœ€å¤§å€¤ï¼‰:
  6. participation_rate: [0.1, 0.3, 0.5]
  7. hidden[0]: [300, 400, 500]
  8. hidden[1]: [300, 400, 500]
  9. activation: ['tanh', 'sigmoid']
  10. epochs: [20, 30, 40]
- **æ¢ç´¢ç©ºé–“**: 162é€šã‚Š
- **æ¨å®šå®Ÿè¡Œæ™‚é–“**: ç´„1æ™‚é–“
- **å›ºå®šæ¡ä»¶**: train=3000, test=1000, seed=42, Phase 1ã®æœ€è‰¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä½¿ç”¨

---

## ğŸš€ å®Ÿè¡Œæ‰‹é †

### Step 1: Phase 1ã®å®Ÿè¡Œ

åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œ:

```bash
# ä»®æƒ³ç’°å¢ƒã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
cd /home/yoichi/develop/ai/column_ed_snn
source .venv/bin/activate

# Phase 1å®Ÿè¡Œ
python3 grid_search_phase1_top5.py
```

#### å®Ÿè¡Œä¸­ã®ç¢ºèª
```bash
# é€²æ—ç¢ºèªï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
tail -f parameter_search_logs/phase1_grid_search_*.log

# ä¸­é–“çµæœç¢ºèª
head -20 parameter_search_logs/phase1_results_*.csv
```

#### å®Œäº†å¾Œã®ä¸Šä½çµæœç¢ºèª
```bash
# CSVã‹ã‚‰ä¸Šä½10ä»¶ã‚’è¡¨ç¤º
(head -1 parameter_search_logs/phase1_results_*.csv && \
 tail -n +2 parameter_search_logs/phase1_results_*.csv | \
 sort -t',' -k7 -rn) | head -11
```

### Step 2: Phase 2ã®å®Ÿè¡Œæº–å‚™

**é‡è¦**: Phase 1å®Œäº†å¾Œã€Phase 2ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

1. Phase 1ã®ä¸Šä½çµæœã‹ã‚‰æœ€è‰¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç¢ºèª
2. `grid_search_phase2_rank6_10.py`ã®ä»¥ä¸‹ã®éƒ¨åˆ†ã‚’ç·¨é›†:

```python
BEST_PARAMS_FROM_PHASE1 = {
    'learning_rate': 0.60,      # â† Phase 1ã®æœ€è‰¯å€¤ã«å¤‰æ›´
    'column_radius': 2.0,       # â† Phase 1ã®æœ€è‰¯å€¤ã«å¤‰æ›´
    'lateral_lr': 0.12,         # â† Phase 1ã®æœ€è‰¯å€¤ã«å¤‰æ›´
    'u1': 0.7,                  # â† Phase 1ã®æœ€è‰¯å€¤ã«å¤‰æ›´
    'u2': 0.5,                  # â† Phase 1ã®æœ€è‰¯å€¤ã«å¤‰æ›´
}
```

### Step 3: Phase 2ã®å®Ÿè¡Œ

```bash
# Phase 2å®Ÿè¡Œ
python3 grid_search_phase2_rank6_10.py
```

#### å®Ÿè¡Œä¸­ã®ç¢ºèª
```bash
# é€²æ—ç¢ºèª
tail -f parameter_search_logs/phase2_grid_search_*.log

# ä¸­é–“çµæœç¢ºèª
head -20 parameter_search_logs/phase2_results_*.csv
```

---

## ğŸ“Š çµæœãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ 

### Phase 1çµæœCSV
```csv
exp_num,learning_rate,column_radius,lateral_lr,u1,u2,best_test_acc,best_train_acc,final_test_acc,final_train_acc,elapsed_time,status
1,0.10,1.0,0.03,0.3,0.3,0.2450,0.2501,0.2430,0.2490,18.5,success
...
```

### Phase 2çµæœCSV
```csv
exp_num,participation_rate,hidden0,hidden1,activation,epochs,learning_rate,column_radius,lateral_lr,u1,u2,best_test_acc,best_train_acc,best_epoch,final_test_acc,final_train_acc,elapsed_time,status
1,0.7,128,64,tanh,30,0.60,2.0,0.12,0.7,0.5,0.3250,0.3180,25,0.3200,0.3150,22.3,success
...
```

---

## ğŸ“ˆ çµæœåˆ†æï¼ˆAIã«ä¾é ¼ã™ã‚‹å†…å®¹ï¼‰

### Phase 1å®Œäº†å¾Œ
1. **ä¸Šä½10ä»¶ã®å…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³**
   - learning_rateã®æœ€é©ç¯„å›²
   - column_radiusã¨ã®ç›¸é–¢
   - u1, u2ã®å½±éŸ¿åº¦

2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é–“ã®ç›¸äº’ä½œç”¨**
   - lr Ã— column_radius
   - u1 Ã— lateral_lr
   - u2 Ã— å±¤é–“ä¼æ’­

3. **ç•°å¸¸å€¤ãƒ»å¤–ã‚Œå€¤**
   - æ¥µç«¯ã«ä½ã„ç²¾åº¦ã®çµ„ã¿åˆã‚ã›
   - å­¦ç¿’å´©å£Šã®æ¡ä»¶

### Phase 2å®Œäº†å¾Œ
1. **æ§‹é€ æœ€é©åŒ–ã®åŠ¹æœ**
   - hiddenå±¤ã®æœ€é©ã‚µã‚¤ã‚º
   - activationé–¢æ•°ã®æ¯”è¼ƒ
   - epochsæ•°ã®å½±éŸ¿

2. **Phase 1ã¨ã®çµ±åˆåˆ†æ**
   - å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç·åˆãƒ©ãƒ³ã‚­ãƒ³ã‚°
   - æœ€çµ‚æ¨å¥¨è¨­å®š

3. **70-80%é”æˆã¸ã®é“ç­‹**
   - ã•ã‚‰ãªã‚‹å¾®èª¿æ•´ã®ææ¡ˆ
   - é•·æ™‚é–“å­¦ç¿’ã®æˆ¦ç•¥

---

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒé »ç™ºã™ã‚‹å ´åˆ
```python
# grid_search_*.pyã® timeout å€¤ã‚’å¢—ã‚„ã™
timeout=600  # â†’ timeout=900 (15åˆ†)
```

### ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
```bash
# train_samplesã‚’æ¸›ã‚‰ã™
--train_samples 2000  # 3000 â†’ 2000
```

### ä¸­æ–­ã—ã¦å†é–‹ã—ãŸã„å ´åˆ
1. å®Œäº†æ¸ˆã¿ã®å®Ÿé¨“ç•ªå·ã‚’ç¢ºèª:
```bash
tail parameter_search_logs/phase1_results_*.csv
```

2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç·¨é›†ã—ã¦é–‹å§‹ä½ç½®ã‚’å¤‰æ›´:
```python
for i, (...) in enumerate(param_combinations[500:], 501):  # 501ç•ªç›®ã‹ã‚‰å†é–‹
```

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹æˆæœ

### Phase 1å®Œäº†æ™‚
- **ç›®æ¨™ç²¾åº¦**: 40-50%
- **ç¾åœ¨ã®æœ€è‰¯å€¤**: 32.75% (æ˜¨å¤œã®çµæœ)
- **æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„**: +10-15%

### Phase 2å®Œäº†æ™‚
- **ç›®æ¨™ç²¾åº¦**: 50-60%
- **Phase 1ã‹ã‚‰ã®æ”¹å–„**: +10%
- **æ§‹é€ æœ€é©åŒ–ã®åŠ¹æœã‚’ç¢ºèª**

### æœ€çµ‚ç›®æ¨™
- **70-80%**: ã•ã‚‰ãªã‚‹å¾®èª¿æ•´ + é•·æ™‚é–“å­¦ç¿’ã§é”æˆ

---

## ğŸ“ å®Ÿè¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ä»®æƒ³ç’°å¢ƒã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆç¢ºèª
- [ ] Phase 1ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œé–‹å§‹
- [ ] Phase 1ã®é€²æ—ãƒ­ã‚°ç¢ºèªï¼ˆ1æ™‚é–“å¾Œï¼‰
- [ ] Phase 1å®Œäº†ç¢ºèªï¼ˆ5-6æ™‚é–“å¾Œï¼‰
- [ ] Phase 1ã®ä¸Šä½çµæœç¢ºèª
- [ ] Phase 2ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®BEST_PARAMSç·¨é›†
- [ ] Phase 2ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œé–‹å§‹
- [ ] Phase 2ã®é€²æ—ãƒ­ã‚°ç¢ºèªï¼ˆ1æ™‚é–“å¾Œï¼‰
- [ ] Phase 2å®Œäº†ç¢ºèªï¼ˆ4-5æ™‚é–“å¾Œï¼‰
- [ ] Phase 2ã®ä¸Šä½çµæœç¢ºèª
- [ ] AIã«çµæœåˆ†æã‚’ä¾é ¼

---

## ğŸ’¡ è¿½åŠ ã®æœ€é©åŒ–ã‚¢ã‚¤ãƒ‡ã‚¢

### ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã®é«˜é€ŸåŒ–
1. **ä¸¦åˆ—å®Ÿè¡Œ** (è¤‡æ•°GPUãŒã‚ã‚‹å ´åˆ)
2. **ãƒ™ã‚¤ã‚ºæœ€é©åŒ–** (æ¬¡ã®Phaseã§æ¤œè¨)
3. **æ—©æœŸæ‰“ã¡åˆ‡ã‚Š** (ç²¾åº¦ãŒé–¾å€¤ä»¥ä¸‹ãªã‚‰ä¸­æ–­)

### ã‚ˆã‚Šè©³ç´°ãªåˆ†æ
1. **å­¦ç¿’æ›²ç·šã®å¯è¦–åŒ–**
2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ„Ÿåº¦åˆ†æ**
3. **ã‚¢ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ãƒ‡ã‚£**

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å®Ÿè¡Œä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€çµ‚è¡Œã‚’ç¢ºèª
2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’AIã«å…±æœ‰
3. å¿…è¦ã«å¿œã˜ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¿®æ­£

å®Œäº†å¾Œã¯å¿…ãšAIã«å ±å‘Šã—ã¦ãã ã•ã„ã€‚è©³ç´°ãªçµæœåˆ†æã‚’è¡Œã„ã¾ã™ï¼
